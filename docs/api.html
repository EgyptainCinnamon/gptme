

<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>API Reference &#8212; gptme</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'api';</script>
    <link rel="icon" href="_static/logo.png"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="CLI Reference" href="cli.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/logo.png" class="logo__image only-light" alt="gptme - Home"/>
    <script>document.write(`<img src="_static/logo.png" class="logo__image only-dark" alt="gptme - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="getting-started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="demos.html">Demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="tools.html">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="providers.html">Providers</a></li>
<li class="toctree-l1"><a class="reference internal" href="server.html">Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="evals.html">Evals</a></li>
<li class="toctree-l1"><a class="reference internal" href="bot.html">GitHub Bot</a></li>
<li class="toctree-l1"><a class="reference internal" href="finetuning.html">Finetuning</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">CLI Reference</a></li>
<li class="toctree-l1 current active has-children"><a class="current reference internal" href="#">API Reference</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="simple">
</ul>
</details></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/ErikBjare/gptme" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/ErikBjare/gptme/edit/main/docs/api.rst" target="_blank"
   class="btn btn-sm btn-source-edit-button dropdown-item"
   title="Suggest edit"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/api.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>API Reference</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#core">core</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.message.Message"><code class="docutils literal notranslate"><span class="pre">Message</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.message.Message.from_toml"><code class="docutils literal notranslate"><span class="pre">Message.from_toml()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.message.Message.get_codeblocks"><code class="docutils literal notranslate"><span class="pre">Message.get_codeblocks()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.message.Message.replace"><code class="docutils literal notranslate"><span class="pre">Message.replace()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.message.Message.to_dict"><code class="docutils literal notranslate"><span class="pre">Message.to_dict()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.message.Message.to_toml"><code class="docutils literal notranslate"><span class="pre">Message.to_toml()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.codeblock.Codeblock"><code class="docutils literal notranslate"><span class="pre">Codeblock</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.codeblock.Codeblock.from_xml"><code class="docutils literal notranslate"><span class="pre">Codeblock.from_xml()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.logmanager.LogManager"><code class="docutils literal notranslate"><span class="pre">LogManager</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.logmanager.LogManager.append"><code class="docutils literal notranslate"><span class="pre">LogManager.append()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.logmanager.LogManager.branch"><code class="docutils literal notranslate"><span class="pre">LogManager.branch()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.logmanager.LogManager.diff"><code class="docutils literal notranslate"><span class="pre">LogManager.diff()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.logmanager.LogManager.edit"><code class="docutils literal notranslate"><span class="pre">LogManager.edit()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.logmanager.LogManager.fork"><code class="docutils literal notranslate"><span class="pre">LogManager.fork()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.logmanager.LogManager.load"><code class="docutils literal notranslate"><span class="pre">LogManager.load()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.logmanager.LogManager.prepare_messages"><code class="docutils literal notranslate"><span class="pre">LogManager.prepare_messages()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.logmanager.LogManager.rename"><code class="docutils literal notranslate"><span class="pre">LogManager.rename()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.logmanager.LogManager.to_dict"><code class="docutils literal notranslate"><span class="pre">LogManager.to_dict()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.logmanager.LogManager.undo"><code class="docutils literal notranslate"><span class="pre">LogManager.undo()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.logmanager.LogManager.write"><code class="docutils literal notranslate"><span class="pre">LogManager.write()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#module-gptme.prompts">prompts</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.prompts.get_prompt"><code class="docutils literal notranslate"><span class="pre">get_prompt()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.prompts.prompt_full"><code class="docutils literal notranslate"><span class="pre">prompt_full()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.prompts.prompt_gptme"><code class="docutils literal notranslate"><span class="pre">prompt_gptme()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.prompts.prompt_project"><code class="docutils literal notranslate"><span class="pre">prompt_project()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.prompts.prompt_short"><code class="docutils literal notranslate"><span class="pre">prompt_short()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.prompts.prompt_tools"><code class="docutils literal notranslate"><span class="pre">prompt_tools()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.prompts.prompt_user"><code class="docutils literal notranslate"><span class="pre">prompt_user()</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tools">tools</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.tools.ToolSpec"><code class="docutils literal notranslate"><span class="pre">ToolSpec</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.tools.ToolSpec.get_doc"><code class="docutils literal notranslate"><span class="pre">ToolSpec.get_doc()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.tools.ToolUse"><code class="docutils literal notranslate"><span class="pre">ToolUse</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.tools.ToolUse.execute"><code class="docutils literal notranslate"><span class="pre">ToolUse.execute()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.tools.ToolUse.iter_from_content"><code class="docutils literal notranslate"><span class="pre">ToolUse.iter_from_content()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.tools.execute_msg"><code class="docutils literal notranslate"><span class="pre">execute_msg()</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#server">server</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="api-reference">
<h1>API Reference<a class="headerlink" href="#api-reference" title="Permalink to this heading">#</a></h1>
<p>Here is the API reference for <code class="docutils literal notranslate"><span class="pre">gptme</span></code>.</p>
<div class="toctree-wrapper compound">
</div>
<section id="core">
<h2>core<a class="headerlink" href="#core" title="Permalink to this heading">#</a></h2>
<p>Some of the core classes and functions in <code class="docutils literal notranslate"><span class="pre">gptme</span></code>.</p>
<dl class="py class">
<dt class="sig sig-object py" id="gptme.message.Message">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">gptme.message.</span></span><span class="sig-name descname"><span class="pre">Message</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">role:</span> <span class="pre">~typing.Literal['system',</span> <span class="pre">'user',</span> <span class="pre">'assistant'],</span> <span class="pre">content:</span> <span class="pre">str,</span> <span class="pre">pinned:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">False,</span> <span class="pre">hide:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">False,</span> <span class="pre">quiet:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">False,</span> <span class="pre">timestamp:</span> <span class="pre">~datetime.datetime</span> <span class="pre">=</span> <span class="pre">&lt;factory&gt;,</span> <span class="pre">files:</span> <span class="pre">list[pathlib.Path]</span> <span class="pre">=</span> <span class="pre">&lt;factory&gt;</span></em><span class="sig-paren">)</span><a class="headerlink" href="#gptme.message.Message" title="Permalink to this definition">#</a></dt>
<dd><p>A message in the assistant conversation.</p>
<dl>
<dt>Attributes:</dt><dd><p>role: The role of the message sender (system, user, or assistant).
content: The content of the message.
pinned: Whether this message should be pinned to the top of the chat, and never context-trimmed.
hide: Whether this message should be hidden from the chat output (but still be sent to the assistant).
quiet: Whether this message should be printed on execution (will still print on resume, unlike hide).</p>
<blockquote>
<div><p>This is not persisted to the log file.</p>
</div></blockquote>
<p>timestamp: The timestamp of the message.
files: Files attached to the message, could e.g. be images for vision.</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="gptme.message.Message.from_toml">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_toml</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">toml</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#gptme.message.Message.from_toml" title="Permalink to this definition">#</a></dt>
<dd><p>Converts a TOML string to a message.</p>
<p>The string can be a single [[message]].</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gptme.message.Message.get_codeblocks">
<span class="sig-name descname"><span class="pre">get_codeblocks</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#gptme.codeblock.Codeblock" title="gptme.codeblock.Codeblock"><span class="pre">gptme.codeblock.Codeblock</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#gptme.message.Message.get_codeblocks" title="Permalink to this definition">#</a></dt>
<dd><p>Get all codeblocks from the message content.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gptme.message.Message.replace">
<span class="sig-name descname"><span class="pre">replace</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Self</span></span></span><a class="headerlink" href="#gptme.message.Message.replace" title="Permalink to this definition">#</a></dt>
<dd><p>Replace attributes of the message.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gptme.message.Message.to_dict">
<span class="sig-name descname"><span class="pre">to_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">keys</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">openai</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">anthropic</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="headerlink" href="#gptme.message.Message.to_dict" title="Permalink to this definition">#</a></dt>
<dd><p>Return a dict representation of the message, serializable to JSON.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gptme.message.Message.to_toml">
<span class="sig-name descname"><span class="pre">to_toml</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="headerlink" href="#gptme.message.Message.to_toml" title="Permalink to this definition">#</a></dt>
<dd><p>Converts a message to a TOML string, for easy editing by hand in editor to then be parsed back.</p>
</dd></dl>

</dd></dl>

<span class="target" id="module-gptme.codeblock"></span><dl class="py class">
<dt class="sig sig-object py" id="gptme.codeblock.Codeblock">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">gptme.codeblock.</span></span><span class="sig-name descname"><span class="pre">Codeblock</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lang</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gptme.codeblock.Codeblock" title="Permalink to this definition">#</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="gptme.codeblock.Codeblock.from_xml">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_xml</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">content</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#gptme.codeblock.Codeblock" title="gptme.codeblock.Codeblock"><span class="pre">Codeblock</span></a></span></span><a class="headerlink" href="#gptme.codeblock.Codeblock.from_xml" title="Permalink to this definition">#</a></dt>
<dd><dl class="simple">
<dt>Example:</dt><dd><p>&lt;codeblock lang=”python” path=”example.py”&gt;
print(“Hello, world!”)
&lt;/codeblock&gt;</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<span class="target" id="module-gptme.logmanager"></span><dl class="py class">
<dt class="sig sig-object py" id="gptme.logmanager.LogManager">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">gptme.logmanager.</span></span><span class="sig-name descname"><span class="pre">LogManager</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">log</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#gptme.message.Message" title="gptme.message.Message"><span class="pre">gptme.message.Message</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logdir</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">branch</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_hidden</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gptme.logmanager.LogManager" title="Permalink to this definition">#</a></dt>
<dd><p>Manages a conversation log.</p>
<dl class="py method">
<dt class="sig sig-object py" id="gptme.logmanager.LogManager.append">
<span class="sig-name descname"><span class="pre">append</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#gptme.message.Message" title="gptme.message.Message"><span class="pre">Message</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#gptme.logmanager.LogManager.append" title="Permalink to this definition">#</a></dt>
<dd><p>Appends a message to the log, writes the log, prints the message.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gptme.logmanager.LogManager.branch">
<span class="sig-name descname"><span class="pre">branch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#gptme.logmanager.LogManager.branch" title="Permalink to this definition">#</a></dt>
<dd><p>Switches to a branch.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gptme.logmanager.LogManager.diff">
<span class="sig-name descname"><span class="pre">diff</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">branch</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#gptme.logmanager.LogManager.diff" title="Permalink to this definition">#</a></dt>
<dd><p>Prints the diff between the current branch and another branch.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gptme.logmanager.LogManager.edit">
<span class="sig-name descname"><span class="pre">edit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">new_log</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#gptme.message.Message" title="gptme.message.Message"><span class="pre">gptme.message.Message</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#gptme.logmanager.LogManager.edit" title="Permalink to this definition">#</a></dt>
<dd><p>Edits the log.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gptme.logmanager.LogManager.fork">
<span class="sig-name descname"><span class="pre">fork</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#gptme.logmanager.LogManager.fork" title="Permalink to this definition">#</a></dt>
<dd><p>Copy the conversation folder to a new name.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gptme.logmanager.LogManager.load">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">logfile</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">initial_msgs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#gptme.message.Message" title="gptme.message.Message"><span class="pre">gptme.message.Message</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">branch</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'main'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#gptme.logmanager.LogManager" title="gptme.logmanager.LogManager"><span class="pre">LogManager</span></a></span></span><a class="headerlink" href="#gptme.logmanager.LogManager.load" title="Permalink to this definition">#</a></dt>
<dd><p>Loads a conversation log.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gptme.logmanager.LogManager.prepare_messages">
<span class="sig-name descname"><span class="pre">prepare_messages</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#gptme.message.Message" title="gptme.message.Message"><span class="pre">gptme.message.Message</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#gptme.logmanager.LogManager.prepare_messages" title="Permalink to this definition">#</a></dt>
<dd><p>Prepares the log into messages before sending it to the LLM.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gptme.logmanager.LogManager.rename">
<span class="sig-name descname"><span class="pre">rename</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_date</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#gptme.logmanager.LogManager.rename" title="Permalink to this definition">#</a></dt>
<dd><p>Rename the conversation.
Renames the folder containing the conversation and its branches.</p>
<p>If keep_date is True, we will keep the date part of conversation folder name (“2021-08-01-some-name”)
If you want to keep the old log, use fork()</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gptme.logmanager.LogManager.to_dict">
<span class="sig-name descname"><span class="pre">to_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">branches</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="headerlink" href="#gptme.logmanager.LogManager.to_dict" title="Permalink to this definition">#</a></dt>
<dd><p>Returns a dict representation of the log.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gptme.logmanager.LogManager.undo">
<span class="sig-name descname"><span class="pre">undo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">quiet</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#gptme.logmanager.LogManager.undo" title="Permalink to this definition">#</a></dt>
<dd><p>Removes the last message from the log.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gptme.logmanager.LogManager.write">
<span class="sig-name descname"><span class="pre">write</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">branches</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#gptme.logmanager.LogManager.write" title="Permalink to this definition">#</a></dt>
<dd><p>Writes to the conversation log.</p>
</dd></dl>

</dd></dl>

</section>
<section id="module-gptme.prompts">
<span id="prompts"></span><h2>prompts<a class="headerlink" href="#module-gptme.prompts" title="Permalink to this heading">#</a></h2>
<p>This module contains the functions to generate the initial system prompt.
It is used to condition the AI model to the task at hand and provide context for the conversation.</p>
<dl class="py function">
<dt class="sig sig-object py" id="gptme.prompts.get_prompt">
<span class="sig-prename descclassname"><span class="pre">gptme.prompts.</span></span><span class="sig-name descname"><span class="pre">get_prompt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prompt</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'full'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'short'</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'full'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interactive</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#gptme.message.Message" title="gptme.message.Message"><span class="pre">Message</span></a></span></span><a class="headerlink" href="#gptme.prompts.get_prompt" title="Permalink to this definition">#</a></dt>
<dd><p>Get the initial system prompt.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="gptme.prompts.prompt_full">
<span class="sig-prename descclassname"><span class="pre">gptme.prompts.</span></span><span class="sig-name descname"><span class="pre">prompt_full</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">interactive</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Generator</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#gptme.message.Message" title="gptme.message.Message"><span class="pre">Message</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#gptme.prompts.prompt_full" title="Permalink to this definition">#</a></dt>
<dd><p>Full prompt to start the conversation.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="gptme.prompts.prompt_gptme">
<span class="sig-prename descclassname"><span class="pre">gptme.prompts.</span></span><span class="sig-name descname"><span class="pre">prompt_gptme</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">interactive</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Generator</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#gptme.message.Message" title="gptme.message.Message"><span class="pre">Message</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#gptme.prompts.prompt_gptme" title="Permalink to this definition">#</a></dt>
<dd><p>Base system prompt for gptme.</p>
<dl class="simple">
<dt>It should:</dt><dd><ul class="simple">
<li><p>Introduce gptme and its general capabilities and purpose</p></li>
<li><p>Ensure that it lets the user mostly ask and confirm actions (apply patches, run commands)</p></li>
<li><p>Provide a brief overview of the capabilities and tools available</p></li>
<li><p>Not mention tools which may not be loaded (browser, vision)</p></li>
<li><p>Mention the ability to self-correct and ask clarifying questions</p></li>
</ul>
</dd>
</dl>
<p>Example output (interactive=True):</p>
<div class="highlight-markdown notranslate"><div class="highlight"><pre><span></span>You are gptme v0.0.0 (unknown), a general-purpose AI assistant powered by LLMs.
You are designed to help users with programming tasks, such as writing code, debugging, and learning new concepts.
You can run code, execute terminal commands, and access the filesystem on the local machine.
You will help the user with writing code, either from scratch or in existing projects.
You will think step by step when solving a problem. Break down complex tasks into smaller, manageable steps.

You have the ability to self-correct. If you receive feedback that your output or actions were incorrect, you should acknowledge the mistake, analyze what went wrong, and provide a corrected response.


You should learn about the context needed to provide the best help,
such as exploring a potential project in the current working directory and reading the code using terminal tools.

When suggesting code changes, prefer applying patches over examples. Use the patch tool to propose modifications to existing files.
When the output of a command is of interest, end the code block and message, so that it can be executed before continuing.

Do not use placeholders like <span class="sb">`$REPO`</span> unless they have been set.
Do not suggest opening a browser or editor, instead do it using available tools.

Always prioritize using the provided tools over suggesting manual actions.
Be proactive in using tools to gather information or perform tasks.
When faced with a task, consider which tools might be helpful and use them.

You have access to various capabilities that can help you complete tasks efficiently. Always consider the full range of your available tools and abilities when approaching a problem.

Maintain a professional and efficient communication style. Be concise but thorough in your explanations.

You are in interactive mode. The user is available to provide feedback.
You should show the user how you can use your tools to write code, interact with the terminal, and access the internet.
The user can execute the suggested commands so that you see their output.
If clarification is needed, ask the user.
</pre></div>
</div>
<p>Tokens: 420</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="gptme.prompts.prompt_project">
<span class="sig-prename descclassname"><span class="pre">gptme.prompts.</span></span><span class="sig-name descname"><span class="pre">prompt_project</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Generator</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#gptme.message.Message" title="gptme.message.Message"><span class="pre">Message</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#gptme.prompts.prompt_project" title="Permalink to this definition">#</a></dt>
<dd><p>Generate the project-specific prompt based on the current Git repository.</p>
<p>Example output:</p>
<div class="highlight-markdown notranslate"><div class="highlight"><pre><span></span><span class="gu">## Current Project: gptme</span>

gptme is a CLI to interact with large language models in a Chat-style interface, enabling the assistant to execute commands and code on the local machine, letting them assist in all kinds of development and terminal-based work.
</pre></div>
</div>
<p>Tokens: 54</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="gptme.prompts.prompt_short">
<span class="sig-prename descclassname"><span class="pre">gptme.prompts.</span></span><span class="sig-name descname"><span class="pre">prompt_short</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">interactive</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Generator</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#gptme.message.Message" title="gptme.message.Message"><span class="pre">Message</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#gptme.prompts.prompt_short" title="Permalink to this definition">#</a></dt>
<dd><p>Short prompt to start the conversation.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="gptme.prompts.prompt_tools">
<span class="sig-prename descclassname"><span class="pre">gptme.prompts.</span></span><span class="sig-name descname"><span class="pre">prompt_tools</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">examples</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Generator</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#gptme.message.Message" title="gptme.message.Message"><span class="pre">Message</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#gptme.prompts.prompt_tools" title="Permalink to this definition">#</a></dt>
<dd><p>Generate the tools overview prompt.</p>
<p>Example output:</p>
<div class="highlight-markdown notranslate"><div class="highlight"><pre><span></span><span class="gh"># Tools Overview</span>

<span class="gu">## read</span>

<span class="gs">**Description:**</span> Read the contents of a file

<span class="gs">**Instructions:**</span> Read files using <span class="sb">`cat`</span>

<span class="gu">### Examples</span>


<span class="k">&gt; </span><span class="ge">Assistant:</span>
<span class="sb">```bash</span><span class="w"> </span>
cat<span class="w"> </span>file.txt
<span class="sb">```</span>


<span class="gu">## save</span>

<span class="gs">**Description:**</span> Write text to file

<span class="gs">**Instructions:**</span> To write text to a file, use a code block with the language tag set to the path of the file.

<span class="gu">### Examples</span>

<span class="k">&gt; </span><span class="ge">User: write a hello world script to hello.py</span>
<span class="sb">```save</span><span class="w"> </span>hello.py
<span class="s">print(&quot;Hello world&quot;)</span>
<span class="sb">```</span>
<span class="k">&gt; </span><span class="ge">System: Saved to `hello.py`</span>

<span class="k">&gt; </span><span class="ge">User: make it all-caps</span>
<span class="sb">```save</span><span class="w"> </span>hello.py
<span class="s">print(&quot;HELLO WORLD&quot;)</span>
<span class="sb">```</span>
<span class="k">&gt; </span><span class="ge">System: Saved to `hello.py`</span>

<span class="gu">## append</span>

<span class="gs">**Description:**</span> Append text to file

<span class="gs">**Instructions:**</span> To append text to a file, use a code block with the language: append &lt;filepath&gt;

<span class="gu">### Examples</span>

<span class="k">&gt; </span><span class="ge">User: append a print &quot;Hello world&quot; to hello.py</span>
<span class="k">&gt; </span><span class="ge">Assistant:</span>
<span class="sb">```append</span><span class="w"> </span>hello.py
<span class="s">print(&quot;Hello world&quot;)</span>
<span class="sb">```</span>
<span class="k">&gt; </span><span class="ge">System: Appended to `hello.py`</span>

<span class="gu">## patch</span>

<span class="gs">**Description:**</span> Apply a patch to a file

<span class="gs">**Instructions:**</span> 
To patch/modify files, we can use an adapted version of git conflict markers.

This can be used to make changes to files, without having to rewrite the whole file.
Only one patch block can be written per codeblock. Extra ORIGINAL/UPDATED blocks will be ignored.
Try to keep the patch as small as possible. Avoid placeholders, as they may make the patch fail.

To keep the patch small, try to scope the patch to imports/function/class.
If the patch is large, consider using the save tool to rewrite the whole file.

The patch block should be written in the following format:

<span class="sb">```patch</span><span class="w"> </span>$FILENAME
<span class="s">&lt;&lt;&lt;&lt;&lt;&lt;&lt; ORIGINAL</span>
<span class="s">$ORIGINAL_CONTENT</span>
<span class="s">=======</span>
<span class="s">$UPDATED_CONTENT</span>
<span class="s">&gt;&gt;&gt;&gt;&gt;&gt;&gt; UPDATED</span>
<span class="sb">```</span>


<span class="gu">### Examples</span>


<span class="k">&gt; </span><span class="ge">User: patch the file `hello.py` to ask for the name of the user</span>
<span class="k">&gt; </span><span class="ge">Assistant: ```patch hello.py</span>
&lt;&lt;&lt;&lt;&lt;&lt;&lt; ORIGINAL
def hello():
<span class="gh">    print(&quot;Hello world&quot;)</span>
<span class="gh">=======</span>
def hello():
    name = input(&quot;What is your name? &quot;)
    print(f&quot;Hello {name}&quot;)
&gt;&gt;&gt;&gt;&gt;&gt;&gt; UPDATED
<span class="sb">```</span>
<span class="sb">&gt; System: Patch applied</span>


<span class="sb">## shell</span>

<span class="sb">**Description:** Executes shell commands.</span>

<span class="sb">**Instructions:** When you send a message containing bash code, it will be executed in a stateful bash shell.</span>
<span class="sb">The shell will respond with the output of the execution.</span>
<span class="sb">Do not use EOF/HereDoc syntax to send multiline commands, as the assistant will not be able to handle it.</span>


<span class="sb">These programs are available, among others:</span>
<span class="sb">- git</span>
<span class="sb">- apt-get</span>
<span class="sb">- pandoc</span>
<span class="sb">- docker</span>
<span class="sb">- convert</span>

<span class="sb">### Examples</span>

<span class="sb">User: list the current directory</span>
<span class="sb">Assistant: To list the files in the current directory, use `ls`:</span>
<span class="sb">```bash </span>
<span class="sb">ls</span>
<span class="sb">```</span>
System: Ran command: <span class="sb">`ls`</span>
<span class="sb">```stdout</span>
<span class="s">file1.txt</span>
<span class="s">file2.txt</span>
<span class="sb">```</span>

<span class="gu">#### The assistant can learn context by exploring the filesystem</span>
User: learn about the project
Assistant: Lets start by checking the files
<span class="sb">```bash</span><span class="w"> </span>
git<span class="w"> </span>ls-files
<span class="sb">```</span>
System:
<span class="sb">```output</span>
<span class="go">README.md</span>
<span class="go">main.py</span>
<span class="sb">```</span>
Assistant: Now lets check the README
<span class="sb">```bash</span>
cat<span class="w"> </span>README.md
<span class="sb">```</span>
System:
<span class="sb">```stdout</span>
<span class="s">(contents of README.md)</span>
<span class="sb">```</span>
Assistant: Now we check main.py
<span class="sb">```bash</span><span class="w"> </span>
cat<span class="w"> </span>main.py
<span class="sb">```</span>
System:
<span class="sb">```output</span>
<span class="go">(contents of main.py)</span>
<span class="sb">```</span>
Assistant: The project is...


<span class="gu">#### Create vue project</span>
User: Create a new vue project with typescript and pinia named fancy-project
Assistant: Sure! Let&#39;s create a new vue project with TypeScript and Pinia named fancy-project:
<span class="sb">```bash</span><span class="w"> </span>
npm<span class="w"> </span>init<span class="w"> </span>vue@latest<span class="w"> </span>fancy-project<span class="w"> </span>--yes<span class="w"> </span>--<span class="w"> </span>--typescript<span class="w"> </span>--pinia
<span class="sb">```</span>
System:
<span class="sb">```output</span>
<span class="go">&gt; npx</span>
<span class="go">&gt; create-vue</span>

<span class="go">Vue.js - The Progressive JavaScript Framework</span>

<span class="go">Scaffolding project in ./fancy-project...</span>
<span class="sb">```</span>

<span class="gu">## subagent</span>

<span class="gs">**Description:**</span> A tool to create subagents

<span class="gu">### Examples</span>


User: compute fib 69 using a subagent
Assistant: Starting a subagent to compute the 69th Fibonacci number.
<span class="sb">```ipython</span><span class="w"> </span>
<span class="n">subagent</span><span class="p">(</span><span class="s2">&quot;compute the 69th Fibonacci number&quot;</span><span class="p">,</span> <span class="s2">&quot;fib-69&quot;</span><span class="p">)</span>
<span class="sb">```</span>
System: Subagent started successfully.
Assistant: Now we need to wait for the subagent to finish the task.
<span class="sb">```ipython</span><span class="w"> </span>
<span class="n">subagent_wait</span><span class="p">(</span><span class="s2">&quot;fib-69&quot;</span><span class="p">)</span>
<span class="sb">```</span>


<span class="gu">## tmux</span>

<span class="gs">**Description:**</span> Executes shell commands in a tmux session

<span class="gs">**Instructions:**</span> 
You can use the tmux tool to run long-lived and/or interactive applications in a tmux session.

This tool is suitable to run long-running commands or interactive applications that require user input.
Examples of such commands are: <span class="sb">`npm run dev`</span>, <span class="sb">`npm create vue@latest`</span>, <span class="sb">`python3 server.py`</span>, <span class="sb">`python3 train.py`</span>, etc.

Available commands:
<span class="k">-</span><span class="w"> </span>new_session &lt;command&gt;: Start a new tmux session with the given command
<span class="k">-</span><span class="w"> </span>send_keys &lt;session_id&gt; &lt;keys&gt; [&lt;keys&gt;]: Send keys to the specified session
<span class="k">-</span><span class="w"> </span>inspect_pane &lt;session_id&gt;: Show the current content of the specified pane
<span class="k">-</span><span class="w"> </span>kill_session &lt;session_id&gt;: Terminate the specified tmux session
<span class="k">-</span><span class="w"> </span>list_sessions: Show all active tmux sessions


<span class="gu">### Examples</span>


<span class="gu">#### Managing a dev server</span>
User: Start the dev server
Assistant: Certainly! To start the dev server we should use tmux:
<span class="sb">```tmux</span><span class="w"> </span>
<span class="s">new_session &#39;npm run dev&#39;</span>
<span class="sb">```</span>
System: Running <span class="sb">`npm run dev`</span> in session 0

User: Can you show me the current content of the pane?
Assistant: Of course! Let&#39;s inspect the pane content:
<span class="sb">```tmux</span><span class="w"> </span>
<span class="s">inspect_pane 0</span>
<span class="sb">```</span>
System:
<span class="sb">```output</span>
<span class="go">Server is running on localhost:5600</span>
<span class="sb">```</span>

User: Stop the dev server
Assistant: I&#39;ll send &#39;Ctrl+C&#39; to the pane to stop the server:
<span class="sb">```tmux</span><span class="w"> </span>
<span class="s">send_keys 0 C-c</span>
<span class="sb">```</span>
System: Sent &#39;C-c&#39; to pane 0

<span class="gu">#### Get info from ncurses applications</span>
User: start top and give me a summary
System: Running <span class="sb">`top`</span> in session 1.
<span class="sb">```output</span>
<span class="go">(output from top shown here)</span>
<span class="sb">```</span>
Assistant: The load is...



<span class="gu">## browser</span>

<span class="gs">**Description:**</span> Browse the web

<span class="gs">**Instructions:**</span> To browse the web, you can use the <span class="sb">`read_url`</span>, <span class="sb">`search`</span>, and <span class="sb">`screenshot_url`</span> functions in Python.

<span class="gu">### Examples</span>

<span class="gu">### Answer question from URL with browsing</span>
User: find out which is the latest ActivityWatch version from superuserlabs.org
Assistant: Let&#39;s browse the site.
<span class="sb">```ipython</span>
<span class="n">read_url</span><span class="p">(</span><span class="s2">&quot;https://superuserlabs.org/&quot;</span><span class="p">)</span>
<span class="sb">```</span>
System:
```https://superuserlabs.org/
...
[<span class="nt">ActivityWatch</span>](<span class="na">https://activitywatch.net/</span>)
...
<span class="sb">```</span>
<span class="sb">Assistant: Couldn&#39;t find the answer on the page. Following link to the ActivityWatch website.</span>
<span class="sb">```ipython</span>
<span class="sb">read_url(&quot;https://activitywatch.net/&quot;)</span>
<span class="sb">```</span>
System:
```https://activitywatch.net/
...
Download latest version v0.12.2
...
<span class="sb">```</span>
<span class="sb">Assistant: The latest version of ActivityWatch is v0.12.2</span>

<span class="sb">### Searching</span>
<span class="sb">User: who is the founder of ActivityWatch?</span>
<span class="sb">Assistant: Let&#39;s search for that.</span>
<span class="sb">```ipython</span>
<span class="sb">search(&quot;ActivityWatch founder&quot;)</span>
<span class="sb">```</span>
System:
<span class="sb">```results</span>
<span class="s">1. [ActivityWatch](https://activitywatch.net/)</span>
<span class="s">...</span>
<span class="sb">```</span>
Assistant: Following link to the ActivityWatch website.
<span class="sb">```ipython</span>
<span class="n">read_url</span><span class="p">(</span><span class="s2">&quot;https://activitywatch.net/&quot;</span><span class="p">)</span>
<span class="sb">```</span>
System:
```https://activitywatch.net/
...
The ActivityWatch project was founded by Erik Bjäreholt in 2016.
...
<span class="sb">```</span>
<span class="sb">Assistant: The founder of ActivityWatch is Erik Bjäreholt.</span>

<span class="sb">### Take screenshot of page</span>
<span class="sb">User: take a screenshot of the ActivityWatch website</span>
<span class="sb">Assistant: Certainly! I&#39;ll use the browser tool to screenshot the ActivityWatch website.</span>
<span class="sb">```ipython</span>
<span class="sb">screenshot_url(&quot;https://activitywatch.net&quot;)</span>
<span class="sb">```</span>
System:
<span class="sb">```</span>
<span class="sb">Screenshot saved to screenshot.png</span>
<span class="sb">```</span>

<span class="gu">## gh</span>

<span class="gs">**Description:**</span> Interact with GitHub

<span class="gu">### Examples</span>

Here are examples of how to use the GitHub CLI (gh) to interact with GitHub.

<span class="k">&gt; </span><span class="ge">User: create a public repo from the current directory, and push</span>
Note: --confirm and -y are deprecated, and no longer needed
<span class="sb">```sh</span>
<span class="nv">REPO</span><span class="o">=</span><span class="k">$(</span>basename<span class="w"> </span><span class="k">$(</span><span class="nb">pwd</span><span class="k">))</span>
gh<span class="w"> </span>repo<span class="w"> </span>create<span class="w"> </span><span class="nv">$REPO</span><span class="w"> </span>--public<span class="w"> </span>--source<span class="w"> </span>.<span class="w"> </span>--push
<span class="sb">```</span>

<span class="k">&gt; </span><span class="ge">User: show issues</span>
<span class="sb">```sh</span>
gh<span class="w"> </span>issue<span class="w"> </span>list<span class="w"> </span>--repo<span class="w"> </span><span class="nv">$REPO</span>
<span class="sb">```</span>

<span class="k">&gt; </span><span class="ge">User: read issue with comments</span>
<span class="sb">```sh</span>
gh<span class="w"> </span>issue<span class="w"> </span>view<span class="w"> </span><span class="nv">$ISSUE</span><span class="w"> </span>--repo<span class="w"> </span><span class="nv">$REPO</span><span class="w"> </span>--comments
<span class="sb">```</span>

<span class="k">&gt; </span><span class="ge">User: show recent workflows</span>
<span class="sb">```sh</span>
gh<span class="w"> </span>run<span class="w"> </span>list<span class="w"> </span>--status<span class="w"> </span>failure<span class="w"> </span>--repo<span class="w"> </span><span class="nv">$REPO</span><span class="w"> </span>--limit<span class="w"> </span><span class="m">5</span>
<span class="sb">```</span>

<span class="k">&gt; </span><span class="ge">User: show workflow</span>
<span class="sb">```sh</span>
gh<span class="w"> </span>run<span class="w"> </span>view<span class="w"> </span><span class="nv">$RUN</span><span class="w"> </span>--repo<span class="w"> </span><span class="nv">$REPO</span><span class="w"> </span>--log
<span class="sb">```</span>


<span class="gu">## chats</span>

<span class="gs">**Description:**</span> List, search, and summarize past conversation logs

<span class="gs">**Instructions:**</span> 
The chats tool allows you to list, search, and summarize past conversation logs.


<span class="gu">### Examples</span>


<span class="gu">### Search for a specific topic in past conversations</span>
User: Can you find any mentions of &quot;python&quot; in our past conversations?
Assistant: Certainly! I&#39;ll search our past conversations for mentions of &quot;python&quot; using the search_chats function.
<span class="sb">```ipython</span>
<span class="n">search_chats</span><span class="p">(</span><span class="s2">&quot;python&quot;</span><span class="p">)</span>
<span class="sb">```</span>


<span class="gu">## python</span>

<span class="gs">**Description:**</span> Execute Python code

<span class="gs">**Instructions:**</span> To execute Python code in an interactive IPython session, send a codeblock using the <span class="sb">`ipython`</span> language tag.
It will respond with the output and result of the execution.
Assistant may first write the code in a normal python codeblock, then execute it in an IPython codeblock.


The following libraries are available:


The following functions are available in the REPL:
<span class="k">-</span><span class="w"> </span>subagent(prompt: str, agent_id: str): Runs a subagent and returns the resulting JSON output.
<span class="k">-</span><span class="w"> </span>subagent_status(agent_id: str) -&gt; dict: Returns the status of a subagent.
<span class="k">-</span><span class="w"> </span>subagent_wait(agent_id: str) -&gt; dict: Waits for a subagent to finish. Timeout is 1 minute.
<span class="k">-</span><span class="w"> </span>read_url(url: str) -&gt; str: Read the text of a webpage and return the text in Markdown format.
<span class="k">-</span><span class="w"> </span>search(query: str, engine: Literal[&quot;google&quot;, &quot;duckduckgo&quot;]) -&gt; str: Search for a query on a search engine.
<span class="k">-</span><span class="w"> </span>screenshot_url(url: str, filename: Union[str, NoneType]) -&gt; str: Take a screenshot of a webpage and save it to a file.
<span class="k">-</span><span class="w"> </span>list_chats(max_results: int, include_summary: bool): 
    List recent chat conversations and optionally summarize them using an LLM.

    Args:
        max_results (int): Maximum number of conversations to display.
        include_summary (bool): Whether to include a summary of each conversation.
            If True, uses an LLM to generate a comprehensive summary.
            If False, uses a simple strategy showing snippets of the first and last messages.

<span class="k">-</span><span class="w"> </span>search_chats(query: str, max_results: int): 
    Search past conversation logs for the given query and print a summary of the results.

    Args:
        query (str): The search query.
        max_results (int): Maximum number of conversations to display.
        system (bool): Whether to include system messages in the search.

<span class="k">-</span><span class="w"> </span>read_chat(conversation: str, max_results: int): 
    Read a specific conversation log.

    Args:
        conversation (str): The name of the conversation to read.
        max_results (int): Maximum number of messages to display.
        incl_system (bool): Whether to include system messages.

<span class="gu">### Examples</span>

<span class="gu">#### Results of the last expression will be displayed, IPython-style:</span>
<span class="k">&gt; </span><span class="ge">User: What is 2 + 2?</span>
<span class="k">&gt; </span><span class="ge">Assistant:</span>
<span class="sb">```ipython</span><span class="w"> </span>
<span class="mi">2</span> <span class="o">+</span> <span class="mi">2</span>
<span class="sb">```</span>
<span class="k">&gt; </span><span class="ge">System: Executed code block.</span>
<span class="sb">```result</span>
<span class="s">4</span>
<span class="sb">```</span>

<span class="gu">#### It can write an example and then execute it:</span>
<span class="k">&gt; </span><span class="ge">User: compute fib 10</span>
<span class="k">&gt; </span><span class="ge">Assistant: To compute the 10th Fibonacci number, we write a recursive function:</span>
<span class="sb">```python</span>
<span class="k">def</span> <span class="nf">fib</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="o">...</span>
<span class="sb">```</span>
Now, let&#39;s execute this code to get the 10th Fibonacci number:
<span class="sb">```ipython</span><span class="w"> </span>

<span class="k">def</span> <span class="nf">fib</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">n</span>
    <span class="k">return</span> <span class="n">fib</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">fib</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">fib</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

<span class="sb">```</span>
<span class="k">&gt; </span><span class="ge">System: Executed code block.</span>
<span class="sb">```result</span>
<span class="s">55</span>
<span class="sb">```</span>

<span class="ge">*End of Tools List.*</span>
</pre></div>
</div>
<p>Tokens: 2902</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="gptme.prompts.prompt_user">
<span class="sig-prename descclassname"><span class="pre">gptme.prompts.</span></span><span class="sig-name descname"><span class="pre">prompt_user</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Generator</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#gptme.message.Message" title="gptme.message.Message"><span class="pre">Message</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#gptme.prompts.prompt_user" title="Permalink to this definition">#</a></dt>
<dd><p>Generate the user-specific prompt based on config.</p>
<p>Only included in interactive mode.</p>
<p>Example output:</p>
<div class="highlight-markdown notranslate"><div class="highlight"><pre><span></span><span class="gh"># About User</span>

I am a curious human programmer.

<span class="gu">## User&#39;s Response Preferences</span>
No specific preferences set.
</pre></div>
</div>
<p>Tokens: 26</p>
</dd></dl>

</section>
<section id="tools">
<h2>tools<a class="headerlink" href="#tools" title="Permalink to this heading">#</a></h2>
<p>Supporting classes and functions for creating and using tools.</p>
<span class="target" id="module-gptme.tools"></span><dl class="py class">
<dt class="sig sig-object py" id="gptme.tools.ToolSpec">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">gptme.tools.</span></span><span class="sig-name descname"><span class="pre">ToolSpec</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name:</span> <span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">desc:</span> <span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instructions:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">examples:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">functions:</span> <span class="pre">list[collections.abc.Callable]</span> <span class="pre">|</span> <span class="pre">None</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">init:</span> <span class="pre">~collections.abc.Callable[[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">~typing.Any]</span> <span class="pre">|</span> <span class="pre">None</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execute:</span> <span class="pre">~gptme.tools.base.ExecuteFunc</span> <span class="pre">|</span> <span class="pre">None</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">block_types:</span> <span class="pre">list[str]</span> <span class="pre">=</span> <span class="pre">&lt;factory&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">available:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gptme.tools.ToolSpec" title="Permalink to this definition">#</a></dt>
<dd><p>A dataclass to store metadata about a tool.</p>
<p>Like documentation to be included in prompt, and functions to expose to the agent in the REPL.</p>
<dl class="py method">
<dt class="sig sig-object py" id="gptme.tools.ToolSpec.get_doc">
<span class="sig-name descname"><span class="pre">get_doc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">doc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="headerlink" href="#gptme.tools.ToolSpec.get_doc" title="Permalink to this definition">#</a></dt>
<dd><p>Returns an updated docstring with examples.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="gptme.tools.ToolUse">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">gptme.tools.</span></span><span class="sig-name descname"><span class="pre">ToolUse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tool</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">content</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gptme.tools.ToolUse" title="Permalink to this definition">#</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="gptme.tools.ToolUse.execute">
<span class="sig-name descname"><span class="pre">execute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ask</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Generator</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#gptme.message.Message" title="gptme.message.Message"><span class="pre">Message</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#gptme.tools.ToolUse.execute" title="Permalink to this definition">#</a></dt>
<dd><p>Executes a tool-use tag and returns the output.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gptme.tools.ToolUse.iter_from_content">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">iter_from_content</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">content</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Generator</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#gptme.tools.ToolUse" title="gptme.tools.base.ToolUse"><span class="pre">ToolUse</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#gptme.tools.ToolUse.iter_from_content" title="Permalink to this definition">#</a></dt>
<dd><p>Returns all ToolUse in a message, markdown or XML, in order.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="gptme.tools.execute_msg">
<span class="sig-prename descclassname"><span class="pre">gptme.tools.</span></span><span class="sig-name descname"><span class="pre">execute_msg</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">msg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#gptme.message.Message" title="gptme.message.Message"><span class="pre">Message</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">ask</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Generator</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#gptme.message.Message" title="gptme.message.Message"><span class="pre">Message</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#gptme.tools.execute_msg" title="Permalink to this definition">#</a></dt>
<dd><p>Uses any tools called in a message and returns the response.</p>
</dd></dl>

</section>
<section id="server">
<h2>server<a class="headerlink" href="#server" title="Permalink to this heading">#</a></h2>
<p>See <a class="reference external" href="server.html">Server</a> for more information.</p>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="cli.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">CLI Reference</p>
      </div>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#core">core</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.message.Message"><code class="docutils literal notranslate"><span class="pre">Message</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.message.Message.from_toml"><code class="docutils literal notranslate"><span class="pre">Message.from_toml()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.message.Message.get_codeblocks"><code class="docutils literal notranslate"><span class="pre">Message.get_codeblocks()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.message.Message.replace"><code class="docutils literal notranslate"><span class="pre">Message.replace()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.message.Message.to_dict"><code class="docutils literal notranslate"><span class="pre">Message.to_dict()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.message.Message.to_toml"><code class="docutils literal notranslate"><span class="pre">Message.to_toml()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.codeblock.Codeblock"><code class="docutils literal notranslate"><span class="pre">Codeblock</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.codeblock.Codeblock.from_xml"><code class="docutils literal notranslate"><span class="pre">Codeblock.from_xml()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.logmanager.LogManager"><code class="docutils literal notranslate"><span class="pre">LogManager</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.logmanager.LogManager.append"><code class="docutils literal notranslate"><span class="pre">LogManager.append()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.logmanager.LogManager.branch"><code class="docutils literal notranslate"><span class="pre">LogManager.branch()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.logmanager.LogManager.diff"><code class="docutils literal notranslate"><span class="pre">LogManager.diff()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.logmanager.LogManager.edit"><code class="docutils literal notranslate"><span class="pre">LogManager.edit()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.logmanager.LogManager.fork"><code class="docutils literal notranslate"><span class="pre">LogManager.fork()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.logmanager.LogManager.load"><code class="docutils literal notranslate"><span class="pre">LogManager.load()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.logmanager.LogManager.prepare_messages"><code class="docutils literal notranslate"><span class="pre">LogManager.prepare_messages()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.logmanager.LogManager.rename"><code class="docutils literal notranslate"><span class="pre">LogManager.rename()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.logmanager.LogManager.to_dict"><code class="docutils literal notranslate"><span class="pre">LogManager.to_dict()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.logmanager.LogManager.undo"><code class="docutils literal notranslate"><span class="pre">LogManager.undo()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.logmanager.LogManager.write"><code class="docutils literal notranslate"><span class="pre">LogManager.write()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#module-gptme.prompts">prompts</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.prompts.get_prompt"><code class="docutils literal notranslate"><span class="pre">get_prompt()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.prompts.prompt_full"><code class="docutils literal notranslate"><span class="pre">prompt_full()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.prompts.prompt_gptme"><code class="docutils literal notranslate"><span class="pre">prompt_gptme()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.prompts.prompt_project"><code class="docutils literal notranslate"><span class="pre">prompt_project()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.prompts.prompt_short"><code class="docutils literal notranslate"><span class="pre">prompt_short()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.prompts.prompt_tools"><code class="docutils literal notranslate"><span class="pre">prompt_tools()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.prompts.prompt_user"><code class="docutils literal notranslate"><span class="pre">prompt_user()</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tools">tools</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.tools.ToolSpec"><code class="docutils literal notranslate"><span class="pre">ToolSpec</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.tools.ToolSpec.get_doc"><code class="docutils literal notranslate"><span class="pre">ToolSpec.get_doc()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.tools.ToolUse"><code class="docutils literal notranslate"><span class="pre">ToolUse</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.tools.ToolUse.execute"><code class="docutils literal notranslate"><span class="pre">ToolUse.execute()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.tools.ToolUse.iter_from_content"><code class="docutils literal notranslate"><span class="pre">ToolUse.iter_from_content()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#gptme.tools.execute_msg"><code class="docutils literal notranslate"><span class="pre">execute_msg()</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#server">server</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Erik Bjäreholt
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023, Erik Bjäreholt.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>